<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>zParquet's Blog</title>
        <link rel="stylesheet" href="css/blogs.css">
        
    </head>
    <body>
        <header>
            <div class='headerpicture'>
                <div class='headtitle'>
                    <p class='maintitle'>zParquet's Blog</p>
                    <p class='subtitle'>张文源的博客</p>
                </div>
            </div>
        </header>
        <main>
            <hr width="50%" color="silver" />
            <table align="center">
                <tr>
                    <td style='border-right: 1px solid silver;'><a href='/index.html'>主页</a></td>
                    <td style='border-right: 1px solid silver;'><a href='/aboutMe.html'>关于</a></td>
                    <td style='border-right: 1px solid silver;'><a href='/blog_pro4.html'>日志</a></td>
                    <td><a href='#hrefs'>链接</a></td>
                </tr>
            </table>
            <hr width="50%" color="silver" />
            <br />
            <br />
            <div>
                <h1 align='center'>
                    实验4技术文档
                </h1>
                <h2 align='center'>
                    前端小学期第4次基础实验技术文档
                </h2>
                <p class='analysis'>
                    本次实验并不是很困难，最大的难点在于理解后端框架。我本次实验使用koa搭建，参考了网上的一些教程。
                </p>
                <p class='analysis'>
                    个人主页部分非常简单，可以使用koa-static中间件一行代码就实现。因为koa-static已经内置了网页之间的链接关系，并且专门为展示静态网页设置，它默认调用文件夹里的index.html，所以只需要把我的个人主页的主界面命名为index.html，然后为其它网页都设置好相对路径的链接关系（注意这里不要用绝对路径，因为网页的地址是与服务器ip、端口等息息相关的，乱用绝对路径会出错），然后使用一句
                </p>    
                <p class='displayCode'>
                    app2.use(KoaStatic('./'))
                </p>
                <p>
                    就可以轻松做到静态个人主页的展示。
                </p>
                <p class='analysis'>
                    关于api接口的部分颇费了我一番心思，最开始我没有弄清楚post请求提交的Content-Type格式，很长一段时间里我都当成json字符串来做，但后来发现它应该是multipart/form-data格式，而我之前为了解析json字符串，使用了koa的koa-bodyparser中间件，但用这个解析出来的rtx.request.body永远是空的……后来查阅资料发现koa-bodyparser只能解析application/json的格式，于是改换koa-body来做，结果又发现rtx.request.body是空……这个困扰了我数个小时，最后在网上搜索到一些资料发现是跟koa-body的设置有关，在中间件的默认设置中有一些格式和开关是默认关闭的，经过调整设置，总算获得了正确的body内容，之后使用router中间件来对不同的url进行处理，后面就变得很容易了。
                </p>
            </div>
        </main>
        <footer>
                <br />
                <br />
                <br />
                <hr width="50%" color="silver" />
                <br />
                <table align="center" cellspacing='15px' cellpadding='15px' >
                    <tr>
                        <td><a href='https://github.com/zParquet' target="_blank" name='hrefs'><img src="resources/github.jpg" /></a></td>
                        <td><a href='https://weibo.com/6117683942/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1' target='_blank'><img src="resources/weibo.jpg" /></a></td>
                        <td><a href='https://space.bilibili.com/168012084?spm_id_from=333.788.b_765f7570696e666f.1' target="_blank"><img src="resources/bilibili.jpg" /></a></td>
                    </tr>
                </table>
                <p class='ending'>
                    版权所有@2019 张文源
                </p>
        </footer>
    </body>
</html>
